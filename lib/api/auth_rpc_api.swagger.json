{
  "swagger": "2.0",
  "info": {
    "title": "lib/api/auth_rpc_api.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/carrier/v1/auth/applyIdentity": {
      "post": {
        "summary": "组织身份入网申请",
        "operationId": "AuthService_ApplyIdentityJoin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiApplyIdentityJoinRequest"
            }
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/applyMetadataAuth": {
      "post": {
        "summary": "发起数据授权申请",
        "operationId": "AuthService_ApplyMetadataAuthority",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiApplyMetadataAuthorityResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiApplyMetadataAuthorityRequest"
            }
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/auditMetadataAuth": {
      "post": {
        "summary": "数据授权审核",
        "operationId": "AuthService_AuditMetadataAuthority",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiAuditMetadataAuthorityResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiAuditMetadataAuthorityRequest"
            }
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/getIdentity": {
      "get": {
        "summary": "查询自己组织的identity信息",
        "operationId": "AuthService_GetNodeIdentity",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetNodeIdentityResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/globalMetadataAuthList": {
      "get": {
        "summary": "查询(全网)的所有元数据的授权申请及审核结果详情列表",
        "operationId": "AuthService_GetGlobalMetadataAuthorityList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetMetadataAuthorityListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/identityList": {
      "get": {
        "summary": "查询全网组织的身份信息列表(已入网的)",
        "operationId": "AuthService_GetIdentityList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetIdentityListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/localMetadataAuthList": {
      "get": {
        "summary": "查询(本组织)的所有元数据的授权申请及审核结果详情列表",
        "operationId": "AuthService_GetLocalMetadataAuthorityList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetMetadataAuthorityListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/revokeIdentity": {
      "post": {
        "summary": "注销准入网络",
        "operationId": "AuthService_RevokeIdentityJoin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "properties": {}
            }
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/carrier/v1/auth/revokeMetadataAuth": {
      "post": {
        "summary": "撤销数据授权申请",
        "operationId": "AuthService_RevokeMetadataAuthority",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiRevokeMetadataAuthorityRequest"
            }
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "protobufAuditMetadataOption": {
      "type": "string",
      "enum": [
        "Audit_Pending",
        "Audit_Passed",
        "Audit_Refused"
      ],
      "default": "Audit_Pending"
    },
    "protobufCommonStatus": {
      "type": "string",
      "enum": [
        "CommonStatus_Unknown",
        "CommonStatus_Normal",
        "CommonStatus_NonNormal"
      ],
      "default": "CommonStatus_Unknown",
      "title": "Y : normal, N non-normal"
    },
    "protobufMetadataAuthorityState": {
      "type": "string",
      "enum": [
        "MAState_Unknown",
        "MAState_Created",
        "MAState_Released",
        "MAState_Revoked",
        "MAState_Invalid"
      ],
      "default": "MAState_Unknown",
      "title": "数据授权信息的状态 (0: 未知; 1: 还未发布的数据授权; 2: 已发布的数据授权; 3: 已撤销的数据授权 \u003c失效前主动撤回的\u003e; 4: 已经失效的数据授权 \u003c过期or达到使用上限的or被拒绝的\u003e;)"
    },
    "protobufMetadataUsageType": {
      "type": "string",
      "enum": [
        "Usage_Unknown",
        "Usage_Period",
        "Usage_Times"
      ],
      "default": "Usage_Unknown",
      "title": "元数据的使用方式类型枚举 (0: 未定义; 1: 按照时间段来使用; 2: 按照次数来使用)"
    },
    "protobufOrganization": {
      "type": "object",
      "properties": {
        "node_name": {
          "type": "string",
          "title": "org name"
        },
        "node_id": {
          "type": "string",
          "title": "the node_id for org"
        },
        "identity_id": {
          "type": "string",
          "title": "the identity for org"
        },
        "status": {
          "$ref": "#/definitions/protobufCommonStatus",
          "title": "the status for organization(deleted/normal)"
        },
        "update_at": {
          "type": "string",
          "format": "uint64",
          "title": "v 3.0\nthe last_update time of corresponding datacenter (unit: UTC ms)"
        },
        "image_url": {
          "type": "string",
          "title": "the link of face image (with a length limit)"
        },
        "details": {
          "type": "string",
          "title": "description of the node (with a length limit)"
        }
      },
      "description": "A represents the basic information of the organization."
    },
    "protobufSimpleResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32",
          "title": "the code for response"
        },
        "msg": {
          "type": "string",
          "title": "the message for response"
        }
      }
    },
    "protobufUserType": {
      "type": "string",
      "enum": [
        "User_Unknown",
        "User_1",
        "User_2",
        "User_3"
      ],
      "default": "User_Unknown"
    },
    "rpcapiApplyIdentityJoinRequest": {
      "type": "object",
      "properties": {
        "member": {
          "$ref": "#/definitions/protobufOrganization"
        }
      },
      "title": "组织身份入网申请 req"
    },
    "rpcapiApplyMetadataAuthorityRequest": {
      "type": "object",
      "properties": {
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "auth": {
          "$ref": "#/definitions/typesMetadataAuthority"
        },
        "sign": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "发起用户对元数据使用授权申请 req"
    },
    "rpcapiApplyMetadataAuthorityResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "metadata_auth_id": {
          "type": "string"
        }
      },
      "title": "发起用户对元数据使用授权申请 resp"
    },
    "rpcapiAuditMetadataAuthorityRequest": {
      "type": "object",
      "properties": {
        "metadata_auth_id": {
          "type": "string"
        },
        "audit": {
          "$ref": "#/definitions/protobufAuditMetadataOption"
        },
        "suggestion": {
          "type": "string"
        }
      },
      "title": "组织对用户的数据授权申请做审核 req"
    },
    "rpcapiAuditMetadataAuthorityResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32",
          "title": "the code for response"
        },
        "msg": {
          "type": "string",
          "title": "the message for response"
        },
        "audit": {
          "$ref": "#/definitions/protobufAuditMetadataOption"
        }
      },
      "title": "组织对用户的数据授权申请做审核 resp"
    },
    "rpcapiGetIdentityListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "member_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufOrganization"
          }
        }
      },
      "title": "查询全网组织的身份信息列表(已入网的) resp"
    },
    "rpcapiGetMetadataAuthority": {
      "type": "object",
      "properties": {
        "metadata_auth_id": {
          "type": "string"
        },
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "auth": {
          "$ref": "#/definitions/typesMetadataAuthority"
        },
        "audit_option": {
          "$ref": "#/definitions/protobufAuditMetadataOption"
        },
        "audit_suggestion": {
          "type": "string"
        },
        "used_quo": {
          "$ref": "#/definitions/typesMetadataUsedQuo"
        },
        "apply_at": {
          "type": "string",
          "format": "uint64"
        },
        "audit_at": {
          "type": "string",
          "format": "uint64"
        },
        "state": {
          "$ref": "#/definitions/protobufMetadataAuthorityState"
        },
        "update_at": {
          "type": "string",
          "format": "uint64"
        }
      },
      "title": "当前组织的某个用户对单个元数据的授权申请及审核结果详情"
    },
    "rpcapiGetMetadataAuthorityListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetMetadataAuthority"
          }
        }
      },
      "title": "当前(组织or用户)的所有元数据的授权申请及审核结果详情列表 resp"
    },
    "rpcapiGetNodeIdentityResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        }
      },
      "title": "查询自己组织的identity信息 resp"
    },
    "rpcapiRevokeMetadataAuthorityRequest": {
      "type": "object",
      "properties": {
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "metadata_auth_id": {
          "type": "string"
        },
        "sign": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "撤销用户对元数据使用授权申请 req"
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "typesMetadataAuthority": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "metadata_id": {
          "type": "string"
        },
        "usage_rule": {
          "$ref": "#/definitions/typesMetadataUsageRule"
        }
      },
      "title": "元数据使用授权"
    },
    "typesMetadataUsageRule": {
      "type": "object",
      "properties": {
        "usage_type": {
          "$ref": "#/definitions/protobufMetadataUsageType"
        },
        "start_at": {
          "type": "string",
          "format": "uint64"
        },
        "end_at": {
          "type": "string",
          "format": "uint64"
        },
        "times": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "元数据的使用方式定义"
    },
    "typesMetadataUsedQuo": {
      "type": "object",
      "properties": {
        "usage_type": {
          "$ref": "#/definitions/protobufMetadataUsageType"
        },
        "expire": {
          "type": "boolean"
        },
        "used_times": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "对应授权信息中元数据的使用实况定义 (配合数据授权使用)"
    }
  }
}
