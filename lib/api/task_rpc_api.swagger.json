{
  "swagger": "2.0",
  "info": {
    "title": "lib/api/task_rpc_api.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/carrier/v1/task/eventList": {
      "post": {
        "summary": "查看某个任务的全部事件列表",
        "operationId": "TaskService_GetTaskEventList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetTaskEventListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiGetTaskEventListRequest"
            }
          }
        ],
        "tags": [
          "TaskService"
        ]
      }
    },
    "/carrier/v1/task/eventListByTaskIds": {
      "post": {
        "summary": "查看多个任务的全部事件列表",
        "operationId": "TaskService_GetTaskEventListByTaskIds",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetTaskEventListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiGetTaskEventListByTaskIdsRequest"
            }
          }
        ],
        "tags": [
          "TaskService"
        ]
      }
    },
    "/carrier/v1/task/list": {
      "get": {
        "summary": "查看本组织参与过的全部任务详情列表",
        "operationId": "TaskService_GetTaskDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetTaskDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "tags": [
          "TaskService"
        ]
      }
    },
    "/carrier/v1/task/publish": {
      "post": {
        "summary": "发布任务",
        "operationId": "TaskService_PublishTaskDeclare",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiPublishTaskDeclareResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiPublishTaskDeclareRequest"
            }
          }
        ],
        "tags": [
          "TaskService"
        ]
      }
    },
    "/carrier/v1/task/terminate": {
      "post": {
        "summary": "终止任务",
        "operationId": "TaskService_TerminateTask",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiTerminateTaskRequest"
            }
          }
        ],
        "tags": [
          "TaskService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "protobufCommonStatus": {
      "type": "string",
      "enum": [
        "CommonStatus_Unknown",
        "CommonStatus_Normal",
        "CommonStatus_NonNormal"
      ],
      "default": "CommonStatus_Unknown",
      "title": "Y : normal, N non-normal"
    },
    "protobufOrganization": {
      "type": "object",
      "properties": {
        "node_name": {
          "type": "string",
          "title": "org name"
        },
        "node_id": {
          "type": "string",
          "title": "the node_id for org"
        },
        "identity_id": {
          "type": "string",
          "title": "the identity for org"
        },
        "status": {
          "$ref": "#/definitions/protobufCommonStatus",
          "title": "the status for organization(deleted/normal)"
        }
      },
      "description": "A represents the basic information of the organization."
    },
    "protobufSimpleResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32",
          "title": "the code for response"
        },
        "msg": {
          "type": "string",
          "title": "the message for response"
        }
      }
    },
    "protobufTaskOrganization": {
      "type": "object",
      "properties": {
        "party_id": {
          "type": "string"
        },
        "node_name": {
          "type": "string",
          "title": "org name"
        },
        "node_id": {
          "type": "string",
          "title": "the node_id for org"
        },
        "identity_id": {
          "type": "string",
          "title": "the identity for org"
        }
      },
      "title": "任务下的组织信息"
    },
    "protobufTaskResourceCostDeclare": {
      "type": "object",
      "properties": {
        "memory": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的内存 (单位: byte)"
        },
        "processor": {
          "type": "integer",
          "format": "int64",
          "title": "任务所需的核数 (单位: 个)"
        },
        "bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的带宽 (单位: bps)"
        },
        "duration": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的运行时长 (单位: ms)"
        }
      },
      "title": "任务需要花费的资源声明"
    },
    "protobufTaskState": {
      "type": "string",
      "enum": [
        "TaskState_Unknown",
        "TaskState_Pending",
        "TaskState_Running",
        "TaskState_Failed",
        "TaskState_Succeed"
      ],
      "default": "TaskState_Unknown",
      "title": "task的状态"
    },
    "protobufUserType": {
      "type": "string",
      "enum": [
        "User_Unknown",
        "User_1",
        "User_2",
        "User_3"
      ],
      "default": "User_Unknown"
    },
    "rpcapiGetTaskDetailListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "task_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetTaskDetailResponse"
          }
        }
      },
      "title": "查看本组织参与过的全部任务详情列表 resp"
    },
    "rpcapiGetTaskDetailResponse": {
      "type": "object",
      "properties": {
        "information": {
          "$ref": "#/definitions/rpcapiTaskDetailShow"
        }
      },
      "title": "查看本组织参与过的全部任务详情列表"
    },
    "rpcapiGetTaskEventListByTaskIdsRequest": {
      "type": "object",
      "properties": {
        "task_ids": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "查看多个任务的全部事件列表 req"
    },
    "rpcapiGetTaskEventListRequest": {
      "type": "object",
      "properties": {
        "task_id": {
          "type": "string"
        }
      },
      "title": "查看某个任务的全部事件列表 req"
    },
    "rpcapiGetTaskEventListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "task_event_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiTaskEventShow"
          }
        }
      },
      "title": "查看某个or多个任务的全部事件列表 resp"
    },
    "rpcapiPublishTaskDeclareRequest": {
      "type": "object",
      "properties": {
        "task_name": {
          "type": "string"
        },
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "sender": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "algo_supplier": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "data_suppliers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiTaskDataSupplierDeclare"
          }
        },
        "power_party_ids": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "receivers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufTaskOrganization"
          }
        },
        "operation_cost": {
          "$ref": "#/definitions/protobufTaskResourceCostDeclare"
        },
        "calculate_contract_code": {
          "type": "string"
        },
        "data_split_contract_code": {
          "type": "string"
        },
        "contract_extra_params": {
          "type": "string"
        },
        "sign": {
          "type": "string",
          "format": "byte"
        },
        "desc": {
          "type": "string"
        }
      },
      "title": "发布任务 req"
    },
    "rpcapiPublishTaskDeclareResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "task_id": {
          "type": "string"
        }
      },
      "title": "发布任务 resp"
    },
    "rpcapiTaskDataSupplierDeclare": {
      "type": "object",
      "properties": {
        "organization": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "metadata_info": {
          "$ref": "#/definitions/rpcapiTaskMetadataDeclare"
        }
      },
      "title": "任务数据供应者信息 (任务详情定义用)"
    },
    "rpcapiTaskDataSupplierShow": {
      "type": "object",
      "properties": {
        "organization": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "metadata_id": {
          "type": "string"
        },
        "metadata_name": {
          "type": "string"
        }
      },
      "title": "定义：任务数据提供方（仅用于web页面交互使用）"
    },
    "rpcapiTaskDetailShow": {
      "type": "object",
      "properties": {
        "task_id": {
          "type": "string"
        },
        "task_name": {
          "type": "string"
        },
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "sender": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "algo_supplier": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "data_suppliers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiTaskDataSupplierShow"
          }
        },
        "power_suppliers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiTaskPowerSupplierShow"
          }
        },
        "receivers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufTaskOrganization"
          }
        },
        "create_at": {
          "type": "string",
          "format": "uint64"
        },
        "start_at": {
          "type": "string",
          "format": "uint64"
        },
        "end_at": {
          "type": "string",
          "format": "uint64"
        },
        "state": {
          "$ref": "#/definitions/protobufTaskState"
        },
        "operation_cost": {
          "$ref": "#/definitions/protobufTaskResourceCostDeclare"
        },
        "desc": {
          "type": "string"
        }
      },
      "title": "定义：任务详情（仅用户与前端交互展示使用）"
    },
    "rpcapiTaskEventShow": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "task_id": {
          "type": "string"
        },
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "party_id": {
          "type": "string"
        },
        "content": {
          "type": "string"
        },
        "create_at": {
          "type": "string",
          "format": "uint64"
        }
      },
      "title": "定义：任务事件（仅用于web页面交互使用）"
    },
    "rpcapiTaskMetadataDeclare": {
      "type": "object",
      "properties": {
        "metadata_id": {
          "type": "string"
        },
        "key_column": {
          "type": "integer",
          "format": "int64"
        },
        "selected_columns": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int64"
          }
        }
      }
    },
    "rpcapiTaskPowerSupplierShow": {
      "type": "object",
      "properties": {
        "organization": {
          "$ref": "#/definitions/protobufTaskOrganization"
        },
        "power_info": {
          "$ref": "#/definitions/typesResourceUsageOverview"
        }
      },
      "title": "定义：算力提供方（仅用于web页面交互使用）"
    },
    "rpcapiTerminateTaskRequest": {
      "type": "object",
      "properties": {
        "user": {
          "type": "string"
        },
        "user_type": {
          "$ref": "#/definitions/protobufUserType"
        },
        "task_id": {
          "type": "string"
        },
        "sign": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "终止任务 req"
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "typesResourceUsageOverview": {
      "type": "object",
      "properties": {
        "total_mem": {
          "type": "string",
          "format": "uint64",
          "title": "服务系统的总内存 (单位: byte)"
        },
        "used_mem": {
          "type": "string",
          "format": "uint64",
          "title": "服务系统的已用内存  (单位: byte)"
        },
        "total_processor": {
          "type": "integer",
          "format": "int64",
          "title": "服务的总内核数 (单位: 个)"
        },
        "used_processor": {
          "type": "integer",
          "format": "int64",
          "title": "服务的已用内核数 (单位: 个)"
        },
        "total_bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "服务的总带宽数 (单位: bps)"
        },
        "used_bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "服务的已用带宽数 (单位: bps)"
        },
        "total_disk": {
          "type": "string",
          "format": "uint64",
          "title": "服务的总磁盘空间 (单位: byte)"
        },
        "used_disk": {
          "type": "string",
          "format": "uint64",
          "title": "服务的已用磁盘空间 (单位: byte)"
        }
      },
      "title": "系统资源消耗概览"
    }
  }
}
