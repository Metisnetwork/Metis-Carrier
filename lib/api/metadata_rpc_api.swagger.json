{
  "swagger": "2.0",
  "info": {
    "title": "lib/api/metadata_rpc_api.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/carrier/v1/metadata/globalList": {
      "get": {
        "summary": "查看 全网元数据列表",
        "operationId": "MetadataService_GetGlobalMetadataDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetGlobalMetadataDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "MetadataService"
        ]
      }
    },
    "/carrier/v1/metadata/localInternalList": {
      "get": {
        "summary": "查看 本组织(内部的/未发布的/系统生成的)元数据列表",
        "operationId": "MetadataService_GetLocalInternalMetadataDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetLocalMetadataDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "tags": [
          "MetadataService"
        ]
      }
    },
    "/carrier/v1/metadata/localList": {
      "get": {
        "summary": "查看 本组织(已发布的)元数据列表",
        "operationId": "MetadataService_GetLocalMetadataDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetLocalMetadataDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "MetadataService"
        ]
      }
    },
    "/carrier/v1/metadata/publish": {
      "post": {
        "summary": "发布元数据  (新增和编辑 都是发布新的元数据) \u003c底层根据 原始数据Id -- OriginId 来关联 新的MetaDataId\u003e",
        "operationId": "MetadataService_PublishMetadata",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiPublishMetadataResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiPublishMetadataRequest"
            }
          }
        ],
        "tags": [
          "MetadataService"
        ]
      }
    },
    "/carrier/v1/metadata/revoke": {
      "post": {
        "summary": "撤销元数据 (从底层网络撤销)",
        "operationId": "MetadataService_RevokeMetadata",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiRevokeMetadataRequest"
            }
          }
        ],
        "tags": [
          "MetadataService"
        ]
      }
    },
    "/carrier/v1/metadata/usedTaskIdList": {
      "post": {
        "summary": "V 2.0 新增\n查询某 metadata 参与过的任务的taskId列表",
        "operationId": "MetadataService_GetMetadataUsedTaskIdList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetMetadataUsedTaskIdListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiGetMetadataUsedTaskIdListRequest"
            }
          }
        ],
        "tags": [
          "MetadataService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "protobufDataStatus": {
      "type": "string",
      "enum": [
        "DataStatus_Unknown",
        "DataStatus_Valid",
        "DataStatus_Invalid"
      ],
      "default": "DataStatus_Unknown",
      "title": "the status of data for local storage, 1 means valid, 2 means invalid"
    },
    "protobufMetadataState": {
      "type": "string",
      "enum": [
        "MetadataState_Unknown",
        "MetadataState_Created",
        "MetadataState_Released",
        "MetadataState_Revoked"
      ],
      "default": "MetadataState_Unknown",
      "title": "元数据的状态 (0: 未知; 1: 还未发布的新表; 2: 已发布的表; 3: 已撤销的表)"
    },
    "protobufOrganization": {
      "type": "object",
      "properties": {
        "node_name": {
          "type": "string",
          "title": "org name"
        },
        "node_id": {
          "type": "string",
          "title": "the node_id for org"
        },
        "identity_id": {
          "type": "string",
          "title": "the identity for org"
        },
        "status": {
          "$ref": "#/definitions/protobufDataStatus",
          "title": "the status for organization(1 means valid, 2 means invalid)"
        },
        "update_at": {
          "type": "string",
          "format": "uint64",
          "title": "v 3.0\nthe last_update time of corresponding datacenter (unit: UTC ms)"
        },
        "image_url": {
          "type": "string",
          "title": "the link of face image (with a length limit)"
        },
        "details": {
          "type": "string",
          "title": "description of the node (with a length limit)"
        }
      },
      "description": "A represents the basic information of the organization."
    },
    "protobufOriginFileType": {
      "type": "string",
      "enum": [
        "FileType_Unknown",
        "FileType_CSV"
      ],
      "default": "FileType_Unknown",
      "title": "原始文件类型"
    },
    "protobufSimpleResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32",
          "title": "the code for response"
        },
        "msg": {
          "type": "string",
          "title": "the message for response"
        }
      }
    },
    "rpcapiGetGlobalMetadataDetail": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "information": {
          "$ref": "#/definitions/typesMetadataDetail"
        }
      },
      "title": "(全网) 单个元数据详情 resp"
    },
    "rpcapiGetGlobalMetadataDetailListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "metadatas": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetGlobalMetadataDetail"
          }
        }
      },
      "title": "查看 全网元数据列表  resp"
    },
    "rpcapiGetLocalMetadataDetail": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "information": {
          "$ref": "#/definitions/typesMetadataDetail"
        },
        "is_internal": {
          "type": "boolean"
        }
      },
      "title": "(本组织) 单个元数据详情 resp"
    },
    "rpcapiGetLocalMetadataDetailListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "metadatas": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetLocalMetadataDetail"
          }
        }
      },
      "title": "查看 本组织元数据列表  resp"
    },
    "rpcapiGetMetadataUsedTaskIdListRequest": {
      "type": "object",
      "properties": {
        "identity_id": {
          "type": "string"
        },
        "metadata_id": {
          "type": "string"
        }
      },
      "title": "查询某 metadata 参与过的任务的taskId列表 req"
    },
    "rpcapiGetMetadataUsedTaskIdListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "task_ids": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "查询某 metadata 参与过的任务的taskId列表 resp"
    },
    "rpcapiPublishMetadataRequest": {
      "type": "object",
      "properties": {
        "information": {
          "$ref": "#/definitions/typesMetadataDetail"
        }
      },
      "title": "数据上架 req"
    },
    "rpcapiPublishMetadataResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "metadata_id": {
          "type": "string"
        }
      },
      "title": "数据上架 resp"
    },
    "rpcapiRevokeMetadataRequest": {
      "type": "object",
      "properties": {
        "metadata_id": {
          "type": "string"
        }
      },
      "title": "数据下架 req"
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "typesMetadataDetail": {
      "type": "object",
      "properties": {
        "metadata_summary": {
          "$ref": "#/definitions/typesMetadataSummary"
        },
        "total_task_count": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "元数据的详情信息"
    },
    "typesMetadataSummary": {
      "type": "object",
      "properties": {
        "metadata_id": {
          "type": "string"
        },
        "metadata_name": {
          "type": "string"
        },
        "metadata_type": {
          "type": "integer",
          "format": "int64"
        },
        "file_hash": {
          "type": "string"
        },
        "desc": {
          "type": "string"
        },
        "file_type": {
          "$ref": "#/definitions/protobufOriginFileType"
        },
        "industry": {
          "type": "string"
        },
        "state": {
          "$ref": "#/definitions/protobufMetadataState"
        },
        "publish_at": {
          "type": "string",
          "format": "uint64",
          "title": "v 2.0"
        },
        "update_at": {
          "type": "string",
          "format": "uint64"
        },
        "nonce": {
          "type": "string",
          "format": "uint64"
        },
        "metadata_option": {
          "type": "string"
        }
      },
      "title": "=============================== For API =========================\n元数据的摘要内容 (不包含详细 列描述)"
    }
  }
}
