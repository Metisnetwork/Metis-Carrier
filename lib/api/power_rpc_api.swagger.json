{
  "swagger": "2.0",
  "info": {
    "title": "lib/api/power_rpc_api.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/carrier/v1/power/globalDetailList": {
      "get": {
        "summary": "查看全网各个组织的各个算力详情列表",
        "operationId": "PowerService_GetGlobalPowerDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetGlobalPowerDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "last_updated",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "PowerService"
        ]
      }
    },
    "/carrier/v1/power/globalSummaryList": {
      "get": {
        "summary": "查看全网各个组织的总算力(累加)详情列表",
        "operationId": "PowerService_GetGlobalPowerSummaryList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetGlobalPowerSummaryListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "tags": [
          "PowerService"
        ]
      }
    },
    "/carrier/v1/power/localDetailList": {
      "get": {
        "summary": "本组织的所有(宿主机)算力信息列表 (包含【未发布】和【已发布】的)",
        "operationId": "PowerService_GetLocalPowerDetailList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiGetLocalPowerDetailListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "tags": [
          "PowerService"
        ]
      }
    },
    "/carrier/v1/power/publish": {
      "post": {
        "summary": "启用算力 (发布算力)",
        "operationId": "PowerService_PublishPower",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcapiPublishPowerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiPublishPowerRequest"
            }
          }
        ],
        "tags": [
          "PowerService"
        ]
      }
    },
    "/carrier/v1/power/revoke": {
      "post": {
        "summary": "停用算力 (撤销算力)",
        "operationId": "PowerService_RevokePower",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protobufSimpleResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcapiRevokePowerRequest"
            }
          }
        ],
        "tags": [
          "PowerService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "protobufDataStatus": {
      "type": "string",
      "enum": [
        "DataStatus_Unknown",
        "DataStatus_Valid",
        "DataStatus_Invalid"
      ],
      "default": "DataStatus_Unknown",
      "title": "the status of data for local storage, 1 means valid, 2 means invalid"
    },
    "protobufOrganization": {
      "type": "object",
      "properties": {
        "node_name": {
          "type": "string",
          "title": "org name"
        },
        "node_id": {
          "type": "string",
          "title": "the node_id for org"
        },
        "identity_id": {
          "type": "string",
          "title": "the identity for org"
        },
        "status": {
          "$ref": "#/definitions/protobufDataStatus",
          "title": "the status for organization(1 means valid, 2 means invalid)"
        },
        "update_at": {
          "type": "string",
          "format": "uint64",
          "title": "v 3.0\nthe last_update time of corresponding datacenter (unit: UTC ms)"
        },
        "image_url": {
          "type": "string",
          "title": "the link of face image (with a length limit)"
        },
        "details": {
          "type": "string",
          "title": "description of the node (with a length limit)"
        }
      },
      "description": "A represents the basic information of the organization."
    },
    "protobufPowerState": {
      "type": "string",
      "enum": [
        "PowerState_Unknown",
        "PowerState_Created",
        "PowerState_Released",
        "PowerState_Occupation",
        "PowerState_Revoked"
      ],
      "default": "PowerState_Unknown",
      "title": "算力的状态 (0: 未知; 1: 还未发布的算力; 2: 已发布的算力(算力未被占用); 3: 已发布的算力(算力正在被占用); 4: 已撤销的算力)"
    },
    "protobufSimpleResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32",
          "title": "the code for response"
        },
        "msg": {
          "type": "string",
          "title": "the message for response"
        }
      }
    },
    "protobufTaskResourceCostDeclare": {
      "type": "object",
      "properties": {
        "memory": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的内存 (单位: byte)"
        },
        "processor": {
          "type": "integer",
          "format": "int64",
          "title": "任务所需的核数 (单位: 个)"
        },
        "bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的带宽 (单位: bps)"
        },
        "duration": {
          "type": "string",
          "format": "uint64",
          "title": "任务所需的运行时长 (单位: ms)"
        }
      },
      "title": "任务需要花费的资源声明"
    },
    "rpcapiGetGlobalPowerDetail": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "information": {
          "$ref": "#/definitions/typesPowerUsageDetail"
        },
        "power_id": {
          "type": "string"
        }
      },
      "title": "单个组织的各个算力信息"
    },
    "rpcapiGetGlobalPowerDetailListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "powers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetGlobalPowerDetail"
          }
        }
      },
      "title": "全网各个组织的各个算力列表 resp"
    },
    "rpcapiGetGlobalPowerSummary": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "information": {
          "$ref": "#/definitions/typesPowerUsageDetail"
        }
      },
      "title": "单个组织的总算力信息"
    },
    "rpcapiGetGlobalPowerSummaryListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "powers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetGlobalPowerSummary"
          }
        }
      },
      "title": "查看全网各个组织的总算力(累加)详情列表 resp"
    },
    "rpcapiGetLocalPowerDetail": {
      "type": "object",
      "properties": {
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "power": {
          "$ref": "#/definitions/typesPowerUsageDetail"
        },
        "job_node_id": {
          "type": "string"
        },
        "power_id": {
          "type": "string"
        }
      },
      "title": "本组织的单个(宿主机)算力信息 (包含【未发布】和【已发布】的) resp"
    },
    "rpcapiGetLocalPowerDetailListResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "powers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcapiGetLocalPowerDetail"
          }
        }
      },
      "title": "本组织的多个(宿主机)算力信息 (包含【未发布】和【已发布】的)"
    },
    "rpcapiPublishPowerRequest": {
      "type": "object",
      "properties": {
        "job_node_id": {
          "type": "string"
        }
      },
      "title": "启用算力 req"
    },
    "rpcapiPublishPowerResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "format": "int32"
        },
        "msg": {
          "type": "string"
        },
        "power_id": {
          "type": "string"
        }
      },
      "title": "启用算力 resp"
    },
    "rpcapiRevokePowerRequest": {
      "type": "object",
      "properties": {
        "power_id": {
          "type": "string"
        }
      },
      "title": "停用算力 req"
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "typesPowerTask": {
      "type": "object",
      "properties": {
        "task_id": {
          "type": "string"
        },
        "task_name": {
          "type": "string"
        },
        "owner": {
          "$ref": "#/definitions/protobufOrganization"
        },
        "partners": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufOrganization"
          }
        },
        "receivers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufOrganization"
          }
        },
        "operation_cost": {
          "$ref": "#/definitions/protobufTaskResourceCostDeclare"
        },
        "operation_spend": {
          "$ref": "#/definitions/protobufTaskResourceCostDeclare"
        },
        "createAt": {
          "type": "string",
          "format": "uint64"
        }
      },
      "title": "算力上的任务信息"
    },
    "typesPowerUsageDetail": {
      "type": "object",
      "properties": {
        "information": {
          "$ref": "#/definitions/typesResourceUsageOverview"
        },
        "total_task_count": {
          "type": "integer",
          "format": "int64"
        },
        "current_task_count": {
          "type": "integer",
          "format": "int64"
        },
        "tasks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/typesPowerTask"
          }
        },
        "state": {
          "$ref": "#/definitions/protobufPowerState"
        },
        "publish_at": {
          "type": "string",
          "format": "uint64",
          "title": "v 2.0"
        },
        "update_at": {
          "type": "string",
          "format": "uint64"
        }
      },
      "title": "算力及算力上的task信息的公共抽象"
    },
    "typesResourceUsageOverview": {
      "type": "object",
      "properties": {
        "total_mem": {
          "type": "string",
          "format": "uint64",
          "title": "服务系统的总内存 (单位: byte)"
        },
        "used_mem": {
          "type": "string",
          "format": "uint64",
          "title": "服务系统的已用内存  (单位: byte)"
        },
        "total_processor": {
          "type": "integer",
          "format": "int64",
          "title": "服务的总内核数 (单位: 个)"
        },
        "used_processor": {
          "type": "integer",
          "format": "int64",
          "title": "服务的已用内核数 (单位: 个)"
        },
        "total_bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "服务的总带宽数 (单位: bps)"
        },
        "used_bandwidth": {
          "type": "string",
          "format": "uint64",
          "title": "服务的已用带宽数 (单位: bps)"
        },
        "total_disk": {
          "type": "string",
          "format": "uint64",
          "title": "服务的总磁盘空间 (单位: byte)"
        },
        "used_disk": {
          "type": "string",
          "format": "uint64",
          "title": "服务的已用磁盘空间 (单位: byte)"
        }
      },
      "title": "系统资源消耗概览"
    }
  }
}
